<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SpeechSummarizer</title>

  <link rel="stylesheet" href="/static/style.css">
</head>

<body>
  <!-- Top Nav -->
  <div class="nav">
    <div class="brand">
      <div class="title">SpeechSummarizer</div>
      <div class="sub">AI音声認識システム</div>
    </div>

    <div class="nav-center">
      <select id="selSession" class="select" title="過去の認識結果">
        <option value="">履歴を読み込み…</option>
      </select>
      <div class="pill"><span class="dot" id="dotWs"></span><span id="wsStatus">disconnected</span></div>
      <div class="pill">level: <span id="level">-</span> dBFS</div>
      <!-- <div class="pill">カルテ: <span id="patientIdNav">(未設定)</span></div> -->
    </div>

    <div class="nav-right">
      <button class="btn btn-primary" id="btnStart">Start</button>
      <button class="btn btn-danger" id="btnStop" disabled>Stop</button>

      <select id="selAsrModel" class="btn" style="padding:10px 12px; min-width: 140px;">
        <option value="">ASR model...</option>
      </select>

      <label class="toggle" title="患者さんに見せる字幕を巨大化します">
        <input type="checkbox" id="chkHearing">
        難聴
      </label>
    </div>
  </div>

  <!-- Main -->
  <div class="grid">
    <!-- Left: patient + transcript -->
    <div class="card patient-card">
      <div class="hd">
        <h3>ASR情報</h3>
        <div class="muted2">patient_id / asr_model</div>
      </div>
      <div class="bd">
        <div class="meta-row">
          <span class="meta-item">ID: <b id="patientId">(未設定)</b></span>
          <span class="meta-sep">/</span>
          <span class="meta-item">ASR: <b id="asrModelName">(未設定)</b></span>
        </div>
      </div>

      <div class="hd">
        <h3>認識テキスト</h3>
        <div class="muted2">transcript</div>
      </div>
      <div class="bd">
        <textarea id="transcript" class="transcript" spellcheck="false"></textarea>
      </div>

      <div class="hd summary-block">
  <div class="hd-left">
    <h3>SOAP要約</h3>
    <div class="muted2">ollama</div>
  </div>
  <div class="hd-actions">
    <select id="selLlmModel" class="select select-sm" title="LLMモデル"><option value="">LLM model...</option></select>
    <select id="selSoapPrompt" class="select select-sm" title="プロンプト"><option value="">Prompt...</option></select>
    <button class="btn btn-primary btn-sm" id="btnSoap" title="OllamaでSOAP要約">要約</button>
    <button class="btn btn-sm" id="btnCopySoap" title="SOAPをコピー">Copy</button>
  </div>
</div>
      <div class="bd summary-block">
        <textarea id="summary" class="summary" spellcheck="false" placeholder="SOAP要約をここに表示"></textarea>
      </div>
    </div>

    <!-- Right: log -->
    <div class="card log-card">
      <div class="hd">
        <h3>ログ</h3>
        <div class="muted2">events</div>
      </div>
      <div class="bd">
        <div id="log"></div>
      </div>
    </div>
  </div>

<script src="/static/common.js"></script>
</body>
</html>
